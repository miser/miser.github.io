<!DOCTYPE html>
<html class="has-navbar-fixed-top">
  <head>
    <meta charset="utf-8" />
<title>CSS、JS文件对网页的影响 - Miser 胡言</title>
<meta
  name="viewport"
  content="width=device-width, initial-scale=1, maximum-scale=1"
/>

<link
  rel="stylesheet"
  href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css"
/>
<meta name="baidu-site-verification" content="CXKjj3fklD" />
    

<link
  rel="stylesheet"
  href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro"
/>
<link
  rel="stylesheet"
  href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css"
/>


<link
  rel="stylesheet"
  href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"
/>
<link
  rel="stylesheet"
  href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css"
/>


<link
  rel="stylesheet"
  href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"
/>


<link rel="stylesheet" href="/css/style.css">


<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>

      
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZKHJQL3QC0"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-ZKHJQL3QC0');
</script>

  

    <style type="text/css">
      body {
        /* font-family: Consolas, Mononoki, "Roboto Sans", "Liberation Mono",
          monospace; */
        color: #586e75;
        line-height: 1.6;
        background-color: #fdf6e3;
      }
      .gallery-item .caption {
        text-align: center;
      }
      div.adv {
        margin-bottom: 60px;
      }
      ul .img {
        text-align: center;
      }
    </style>
  <meta name="generator" content="Hexo 7.1.1"></head>
  <body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                    
                    胡言
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/archives">Archives</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            
            
            <a class="navbar-item" title="Twitter" href="https://twitter.com/ud_miser">
                
                <i class="fab fa-twitter"></i>
                
            </a>
               
            <a class="navbar-item" title="GitHub" href="https://github.com/miser">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>
 <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            CSS、JS文件对网页的影响
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2018-09-23T22:45:00.000Z" itemprop="datePublished">Sep 24 2018</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
        </span>
        
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><p>我们常说浏览器是单线程的，那么我们在加载资源的时候页面是在等待加载完成呢？还是继续执行后续的操作？加载不同资源对浏览器的操作会有相同响应吗？我们可以通过一个一个简单的实验测试来了解。</p>
<span id="more"></span>

<h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p><em>所有资源均在localhost，浏览器chrome 69，不同浏览器或版本会有少许不同</em></p>
<p>– css</p>
<ul>
<li>css1.css 2秒后返回 body { background-color: #444 }</li>
<li>css2.css 立即返回 body { font-size: 50px;font-weight: bold; }</li>
</ul>
<p>– js</p>
<ul>
<li>js1.js 1秒后返回 console.log(“js1.js loaded”) </li>
<li>js2.js 立即返回 console.log(“js2.js loaded”)</li>
<li>js3.js 3秒后返回 console.log(“js2.js loaded”)</li>
</ul>
<p>– image</p>
<ul>
<li>img1.png 3秒后 返回一张黄色js图片</li>
<li>img2.png 立即返回一张 nodejs图片</li>
</ul>
<p>服务器端代码：</p>
<figure class="highlight javascript hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> <span class="title class_">Koa</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'koa'</span>)</span><br><span class="line"><span class="hljs-keyword">const</span> <span class="title class_">Router</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'koa-router'</span>)</span><br><span class="line"><span class="hljs-keyword">const</span> views = <span class="hljs-built_in">require</span>(<span class="hljs-string">'koa-views'</span>)</span><br><span class="line"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="title class_">Koa</span>()</span><br><span class="line"><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="title class_">Router</span>()</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">views</span>(__dirname + <span class="hljs-string">'/views'</span>))</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="hljs-string">'/'</span>, <span class="hljs-keyword">async</span> (ctx, next) =&gt; {</span><br><span class="line">  <span class="hljs-keyword">await</span> ctx.<span class="title function_">render</span>(<span class="hljs-string">'index.html'</span>)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="hljs-string">'/css1.css'</span>, <span class="hljs-keyword">async</span> ctx =&gt; <span class="hljs-keyword">new</span> <span class="title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {</span><br><span class="line">  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span><br><span class="line">    ctx.<span class="title function_">set</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/css'</span>)</span><br><span class="line">    ctx.<span class="hljs-property">body</span> = <span class="hljs-string">'body { background-color: #444 }'</span></span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">  }, <span class="hljs-number">1000</span> * <span class="hljs-number">2</span>)</span><br><span class="line">}))</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="hljs-string">'/css2.css'</span>, <span class="hljs-keyword">async</span> ctx =&gt; {</span><br><span class="line">  ctx.<span class="title function_">set</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/css'</span>)</span><br><span class="line">  ctx.<span class="hljs-property">body</span> = <span class="hljs-string">'body { font-size: 50px;font-weight: bold; }'</span></span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="hljs-string">'/js1.js'</span>, <span class="hljs-keyword">async</span> ctx =&gt; <span class="hljs-keyword">new</span> <span class="title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {</span><br><span class="line">  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span><br><span class="line">    ctx.<span class="hljs-property">body</span> = <span class="hljs-string">'console.log("js1.js loaded")'</span></span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">  }, <span class="hljs-number">1000</span>)</span><br><span class="line">}))</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="hljs-string">'/js2.js'</span>, <span class="hljs-keyword">async</span> ctx =&gt; {</span><br><span class="line">  ctx.<span class="hljs-property">body</span> = <span class="hljs-string">'console.log("js2.js loaded")'</span></span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="hljs-string">'/js3.js'</span>, <span class="hljs-keyword">async</span> ctx =&gt; <span class="hljs-keyword">new</span> <span class="title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {</span><br><span class="line">  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span><br><span class="line">    ctx.<span class="hljs-property">body</span> = <span class="hljs-string">'console.log("js3.js loaded")'</span></span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">  }, <span class="hljs-number">1000</span> * <span class="hljs-number">3</span>)</span><br><span class="line">}))</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="hljs-string">'/img1.png'</span>, <span class="hljs-keyword">async</span> ctx =&gt; <span class="hljs-keyword">new</span> <span class="title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {</span><br><span class="line">  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span><br><span class="line">    ctx.<span class="title function_">set</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'image/png; charset=UTF-8'</span>)</span><br><span class="line">    ctx.<span class="hljs-property">body</span> = fs.<span class="title function_">createReadStream</span>(<span class="hljs-string">'1.png'</span>)</span><br><span class="line">    <span class="title function_">resolve</span>()</span><br><span class="line">  }, <span class="hljs-number">1000</span> * <span class="hljs-number">3</span>)</span><br><span class="line">}))</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="hljs-string">'/img2.png'</span>, <span class="hljs-keyword">async</span> ctx =&gt; {</span><br><span class="line">  ctx.<span class="title function_">set</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'image/png; charset=UTF-8'</span>)</span><br><span class="line">  ctx.<span class="hljs-property">body</span> = fs.<span class="title function_">createReadStream</span>(<span class="hljs-string">'2.png'</span>)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">app</span><br><span class="line">  .<span class="title function_">use</span>(router.<span class="title function_">routes</span>())</span><br><span class="line">  .<span class="title function_">use</span>(router.<span class="title function_">allowedMethods</span>())</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="hljs-number">3000</span>)</span><br></pre></td></tr></tbody></table></figure>

<h2 id="实验一：-CSS加载是否影响DOM解析"><a href="#实验一：-CSS加载是否影响DOM解析" class="headerlink" title="实验一： CSS加载是否影响DOM解析"></a>实验一： CSS加载是否影响DOM解析</h2><p>index.html</p>
<figure class="highlight html hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="hljs-string">'test'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="hljs-keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="hljs-string">'app'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(el)</span></span><br><span class="line"><span class="hljs-language-javascript">    }, <span class="hljs-number">0</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/css1.css"</span> /&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/css2.css"</span> /&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100px"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/img1.png"</span> /&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100px"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/img2.png"</span> /&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">  <span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="hljs-string">'test'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">&lt;!-- console 输出</span></span><br><span class="line"><span class="hljs-comment">app元素对象</span></span><br><span class="line"><span class="hljs-comment">test: 1947.620849609375ms</span></span><br><span class="line"><span class="hljs-comment">--&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>从控制台的输出可以看到 app 元素会被正确输出，2秒左右再输出 test 的时间，可见__CSS加载并不会阻碍DOM解析__。</p>
<h2 id="实验二：-CSS加载是否影响JS执行和DOM渲染"><a href="#实验二：-CSS加载是否影响JS执行和DOM渲染" class="headerlink" title="实验二： CSS加载是否影响JS执行和DOM渲染"></a>实验二： CSS加载是否影响JS执行和DOM渲染</h2><p>index.html</p>
<figure class="highlight html hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="hljs-string">'test'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/css1.css"</span> /&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/css2.css"</span> /&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js1.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js2.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100px"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/img1.png"</span> /&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100px"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/img2.png"</span> /&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">  <span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="hljs-string">'test'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">&lt;!-- console 输出</span></span><br><span class="line"><span class="hljs-comment">js1.js loaded</span></span><br><span class="line"><span class="hljs-comment">js2.js loaded</span></span><br><span class="line"><span class="hljs-comment">(index):17 test: 1921.02099609375ms</span></span><br><span class="line"><span class="hljs-comment">--&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>当打开index.html页面后，会发现所有资源均同时发起了请求，页面会先处于白屏加载状态（DOM无法渲染），当2秒（左右）后页面除img1.png未渲染外，其它样式和图片均渲染。</p>
<p>从控制台的输出可以看出，虽然js比css快1秒左右加载完毕，但是此刻是处于阻塞状态并没有执行，当css加载完成后，才从上至下的执行（虽然js2.js比js1.js早加载好，但是执行的时候还是从上至下的），当css1.css加载完成后，页面立即渲染，图片img1.png晚1秒左右显示。可见__CSS加载会阻碍JS执行和DOM的渲染__。</p>
<h2 id="实验三：-JS加载是否影响DOM解析和渲染"><a href="#实验三：-JS加载是否影响DOM解析和渲染" class="headerlink" title="实验三： JS加载是否影响DOM解析和渲染"></a>实验三： JS加载是否影响DOM解析和渲染</h2><p>index.html</p>
<figure class="highlight html hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="hljs-string">'test'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="hljs-keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="hljs-string">'app'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(el)</span></span><br><span class="line"><span class="hljs-language-javascript">    }, <span class="hljs-number">0</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js3.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100px"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/img1.png"</span> /&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100px"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/img2.png"</span> /&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">  <span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="hljs-string">'test'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">&lt;!-- console 输出</span></span><br><span class="line"><span class="hljs-comment">null</span></span><br><span class="line"><span class="hljs-comment">js3.js loaded</span></span><br><span class="line"><span class="hljs-comment">test: 2943.9951171875ms</span></span><br><span class="line"><span class="hljs-comment">--&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>我们仅引入一个js3.js文件，设置它的返回时间为3秒，从控制台的输出可以看到 app 元素没有被正确输出（输出null），3秒左右再输出 test 的时间，可见__JS加载会阻碍DOM解析，既然解析都被影响自然必定影响渲染了__。</p>
<h2 id="实验四：-DOM的DOMContentLoaded和onLoad事件"><a href="#实验四：-DOM的DOMContentLoaded和onLoad事件" class="headerlink" title="实验四： DOM的DOMContentLoaded和onLoad事件"></a>实验四： DOM的DOMContentLoaded和onLoad事件</h2><p>index.html</p>
<figure class="highlight html hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="line">	<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="hljs-string">'test'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="hljs-string">'testDOMContentLoaded'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="hljs-string">'testonload'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="hljs-string">'testDOMContentLoaded'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">    }, <span class="hljs-literal">false</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">window</span>.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="hljs-string">'testonload'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">    }</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/css1.css"</span> /&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/css2.css"</span> /&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js1.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">	<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js2.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100px"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/img1.png"</span> /&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100px"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/img2.png"</span> /&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">  <span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="hljs-string">'test'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">&lt;!-- console 输出</span></span><br><span class="line"><span class="hljs-comment">js1.js loaded</span></span><br><span class="line"><span class="hljs-comment">js2.js loaded</span></span><br><span class="line"><span class="hljs-comment">test: 1955.489990234375ms</span></span><br><span class="line"><span class="hljs-comment">testDOMContentLoaded: 1956.044189453125ms</span></span><br><span class="line"><span class="hljs-comment">testonload: 2964.078857421875ms</span></span><br><span class="line"><span class="hljs-comment">--&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>我们通过控制台会发现 testDOMContentLoaded 会在2秒左右打印出来，testonload会在3秒左右打印出来，由此可知__DOMContentLoaded是js和css文件的加载后触发，onload是整个页面所有资源加载完后触发（比如图片等）__。</p>
<h2 id="实验五：-script-async-属性"><a href="#实验五：-script-async-属性" class="headerlink" title="实验五： script async 属性"></a>实验五： script async 属性</h2><p>index.html</p>
<figure class="highlight html hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="line">	<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="hljs-string">'testDOMContentLoaded'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="hljs-string">'testDOMContentLoaded'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">    }, <span class="hljs-literal">false</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="hljs-keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="hljs-string">'app'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(el)</span></span><br><span class="line"><span class="hljs-language-javascript">    }, <span class="hljs-number">0</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">async</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js1.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">async</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js2.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">async</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js3.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="line">	<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>3个js文件都加上”async”,会发现输出顺序是</p>
<ul>
<li>testDOMContentLoaded 会立即打印出来</li>
<li>app元素对象</li>
<li>js2.js loaded</li>
<li>js1.js loaded</li>
<li>js3.js loaded</li>
</ul>
<p>之后我们将js1.js上的”async”移除，会发现输出顺序是</p>
<ul>
<li>el 为 null</li>
<li>js1.js loaded</li>
<li>testDOMContentLoaded 1秒左右时间</li>
<li>js2.js loaded</li>
<li>js3.js loaded</li>
</ul>
<p>之后我们将js3.js上的”async”移除，会发现输出顺序是</p>
<ul>
<li>el 为 null</li>
<li>js1.js loaded</li>
<li>js2.js loaded</li>
<li>js3.js loaded</li>
<li>testDOMContentLoaded 3秒左右时间</li>
</ul>
<p>可见__async会打乱js的执行顺序，有async的js文件哪个先加载完哪个先执行，DOMContentLoaded的触发时间不在和async有关系，不会影响页面的渲染和解析__</p>
<h2 id="实验六：-script-defer-属性"><a href="#实验六：-script-defer-属性" class="headerlink" title="实验六： script defer 属性"></a>实验六： script defer 属性</h2><p>index.html</p>
<figure class="highlight html hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="line">	<span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="hljs-string">'testDOMContentLoaded'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="hljs-string">'testDOMContentLoaded'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">    }, <span class="hljs-literal">false</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="hljs-keyword">const</span> el = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="hljs-string">'app'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(el)</span></span><br><span class="line"><span class="hljs-language-javascript">    }, <span class="hljs-number">0</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">defer</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js1.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">defer</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js2.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">defer</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js3.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="line">	<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>3个js文件都加上”defer”,会发现输出顺序是</p>
<ul>
<li>app元素对象</li>
<li>js1.js loaded</li>
<li>js2.js loaded</li>
<li>js3.js loaded</li>
<li>testDOMContentLoaded 3秒左右时间</li>
</ul>
<p>这和没有加defer和async时一样</p>
<p>之后我们将js1.js上的”defer”移除，会发现输出顺序是</p>
<ul>
<li>el 为 null</li>
<li>js1.js loaded</li>
<li>js2.js loaded</li>
<li>js3.js loaded</li>
<li>testDOMContentLoaded 3秒左右时间</li>
</ul>
<p>这和没有加defer和async时一样</p>
<p>之后我们将js3.js上的”defer”移除，会发现输出顺序是</p>
<ul>
<li>js1.js loaded</li>
<li>js3.js loaded</li>
<li>js2.js loaded</li>
<li>testDOMContentLoaded 3秒左右时间</li>
</ul>
<p>可见__defer会打乱js的执行顺序，有defer的js文件会晚于没有的，但是它们（含有defer）依旧保持从上而下依次执行，DOMContentLoaded的触发时间晚于defer，不会影响页面的渲染和解析__</p>
<h2 id="实验七：-script-defer-async-都加上-属性"><a href="#实验七：-script-defer-async-都加上-属性" class="headerlink" title="实验七： script defer &amp; async 都加上 属性"></a>实验七： script defer &amp; async 都加上 属性</h2><p>index.html</p>
<figure class="highlight html hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="hljs-string">'testDOMContentLoaded'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="hljs-string">'testDOMContentLoaded'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">    }, <span class="hljs-literal">false</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">async</span> <span class="hljs-attr">defer</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js1.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">async</span> <span class="hljs-attr">defer</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js2.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">async</span> <span class="hljs-attr">defer</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js3.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>3个js文件都加上”async”,会发现输出顺序是</p>
<ul>
<li>testDOMContentLoaded 会立即打印出来</li>
<li>js2.js loaded</li>
<li>js1.js loaded</li>
<li>js3.js loaded</li>
</ul>
<p>async优先级比defer高</p>
<h2 id="实验八：-动态创建script"><a href="#实验八：-动态创建script" class="headerlink" title="实验八： 动态创建script"></a>实验八： 动态创建script</h2><p>index.html</p>
<figure class="highlight html hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="hljs-string">'testDOMContentLoaded'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="hljs-string">'testDOMContentLoaded'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">    }, <span class="hljs-literal">false</span>)</span></span><br><span class="line"><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span></span><br><span class="line"><span class="hljs-language-javascript">       <span class="hljs-keyword">var</span> appEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="hljs-string">'app'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">       <span class="variable language_">console</span>.<span class="title function_">log</span>(appEl)</span></span><br><span class="line"><span class="hljs-language-javascript">    }, <span class="hljs-number">0</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="hljs-keyword">var</span>&nbsp;head = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="hljs-string">'head'</span>)[<span class="hljs-number">0</span>]</span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="hljs-keyword">var</span>&nbsp;script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="hljs-string">'script'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">      script.<span class="hljs-property">type</span> = <span class="hljs-string">'text/javascript'</span></span></span><br><span class="line"><span class="hljs-language-javascript">      script.<span class="hljs-property">src</span> = <span class="hljs-string">'js'</span> + (i + <span class="hljs-number">1</span>) + <span class="hljs-string">'.js'</span></span></span><br><span class="line"><span class="hljs-language-javascript">      head.<span class="title function_">appendChild</span>(script)</span></span><br><span class="line"><span class="hljs-language-javascript">    }</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>testDOMContentLoaded 会立即打印出来</li>
<li>appEl 对象</li>
<li>js2.js loaded</li>
<li>js1.js loaded</li>
<li>js3.js loaded</li>
</ul>
<p>如果我们动态创建js1.js和js2.js，将js3.js依旧按照常规写法写在页面中的话</p>
<p>index.html</p>
<figure class="highlight html hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="hljs-string">'testDOMContentLoaded'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="hljs-string">'testDOMContentLoaded'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">    }, <span class="hljs-literal">false</span>)</span></span><br><span class="line"><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span></span><br><span class="line"><span class="hljs-language-javascript">       <span class="hljs-keyword">var</span> appEl = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="hljs-string">'app'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">       <span class="variable language_">console</span>.<span class="title function_">log</span>(appEl)</span></span><br><span class="line"><span class="hljs-language-javascript">    }, <span class="hljs-number">0</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js3.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="hljs-language-javascript"></span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="hljs-keyword">var</span>&nbsp;head = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="hljs-string">'head'</span>)[<span class="hljs-number">0</span>]</span></span><br><span class="line"><span class="hljs-language-javascript">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">2</span>; i++) {</span></span><br><span class="line"><span class="hljs-language-javascript">      <span class="hljs-keyword">var</span>&nbsp;script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="hljs-string">'script'</span>)</span></span><br><span class="line"><span class="hljs-language-javascript">      script.<span class="hljs-property">type</span> = <span class="hljs-string">'text/javascript'</span></span></span><br><span class="line"><span class="hljs-language-javascript">      script.<span class="hljs-property">src</span> = <span class="hljs-string">'js'</span> + (i + <span class="hljs-number">1</span>) + <span class="hljs-string">'.js'</span></span></span><br><span class="line"><span class="hljs-language-javascript">      head.<span class="title function_">appendChild</span>(script)</span></span><br><span class="line"><span class="hljs-language-javascript">    }</span></span><br><span class="line"><span class="hljs-language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span></span><br><span class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>hello world<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span></span><br><span class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>appEl 为 null 立即打印出来</li>
<li>js3.js loaded </li>
<li>testDOMContentLoaded 3秒左右会立即打印出来</li>
<li>js2.js loaded</li>
<li>js1.js loaded</li>
</ul>
<p>可见__动态创建script基本是同时加载，哪个先加载完哪个先执行，但是他们都晚于DOMContentLoaded事件__</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>CSS加载会阻塞DOM渲染和JS执行，但是不影响页DOM解析；JS加载会阻塞DOM解析和渲染，给script标签加上defer &amp; async属性将不再影响DOM解析和渲染，async 是哪个先返回先执行按个，defer会晚于常规标签同时按照含有defer属性的script加载的顺序执行</p>
</body></html>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/2018/09/24/traveling-to-the-philippines/">出差菲律宾</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/2018/07/20/the-quality-of-a-company-first-look-at-HR-department/">一家公司的好坏，先看HR部门</a>
            
        </span>
    </div>
    
</article>



<div class="comments">
    <div class="adv">
  <!-- <ul>
    <li class="img"><img src="/images/give-a-reward.png" alt="reward" /></li>
    <li>
      欢迎加入<a href="https://oriente.com/" target="_blank">Oriente</a
      >前端组，<a
        href="https://www.lagou.com/jobs/4927018.html?source=pl&i=pl-3"
        target="_blank"
        >岗位信息</a
      >
    </li>
    <li>
      同时也欢迎光顾我的小店<a href="http://aimianwu.com" target="_blank"
        >爱眠物</a
      >
    </li>
  </ul> -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6006630417531788" crossorigin="anonymous"></script>
  <!-- 尾部广告 -->
  <!-- <ins
    class="adsbygoogle"
    style="display: block"
    data-ad-client="ca-pub-6006630417531788"
    data-ad-slot="2988625841"
    data-ad-format="auto"
    data-full-width-responsive="true"
  ></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script> -->
</div>

    <h3 class="title is-4">Comments</h3>
    
<script>
    var disqus_config = function () {
        this.page.url = 'https://miser.github.io/2018/09/24/js-css-image-loading/';
        this.page.identifier = '2018/09/24/js-css-image-loading/';
        
        this.language = 'en';
        
    };
    (function() {
        var d = document, s = d.createElement('script');  
        s.src = '//' + 'mblof' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

<div id="disqus_thread">
    
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</div>

    </div>
</section> <footer class="footer">
  <div class="container">
    <div class="columns content">
      <div class="column is-narrow has-text-centered">
        &copy; 2024 Miser&nbsp; Powered by
        <a href="http://hexo.io/" target="_blank">Hexo</a> &
        <a href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
      </div>
      <div class="column is-hidden-mobile"></div>

       
    </div>
  </div>
</footer>
 <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
</script>

    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    

    



<script src="/js/script.js"></script>
 
  </body>
</html>
